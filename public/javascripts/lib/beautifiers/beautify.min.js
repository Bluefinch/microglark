!function(){function e(e,n){"use strict";var r=new t(e,n);return r.beautify()}function t(e,t){"use strict";function n(e,t){var n=0;e&&(n=e.indentation_level,n+=e.var_line&&e.var_line_reindented?1:0,!o()&&e.line_indent_level>n&&(n=e.line_indent_level));var r={mode:t,parent:e,last_text:e?e.last_text:"",last_word:e?e.last_word:"",var_line:!1,var_line_tainted:!1,var_line_reindented:!1,in_html_comment:!1,multiline_frame:!1,if_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,line_indent_level:e?e.line_indent_level:n,start_line_index:G.length,ternary_depth:0};return r}function r(){return{text:[]}}function i(e){if(e=void 0===e?!1:e,G.length)for(_(G[G.length-1],e);e&&G.length>1&&0===G[G.length-1].text.length;)G.pop(),_(G[G.length-1],e)}function _(e){for(;e.text.length&&(" "===e.text[e.text.length-1]||e.text[e.text.length-1]===J||e.text[e.text.length-1]===pt);)e.text.pop()}function a(e){return e.replace(/^\s+|\s+$/g,"")}function l(e){e=e.replace(/\x0d/g,"");for(var t=[],n=e.indexOf("\n");-1!==n;)t.push(e.substring(0,n)),e=e.substring(n+1),n=e.indexOf("\n");return e.length&&t.push(e),t}function o(){var e=G[G.length-1];return 0===e.text.length}function s(){if(o()){if(1===G.length)return!0;var e=G[G.length-2];return 0===e.text.length}return!1}function c(e){if(e=void 0===e?!1:e,Kt.wrap_line_length&&!e){var t=G[G.length-1],n=0;t.text.length>0&&(n=t.text.join("").length+$.length+(ct?1:0),n>=Kt.wrap_line_length&&(e=!0))}(Kt.preserve_newlines&&ot||e)&&!o()&&(d(!1,!0),A(V.mode)||E(V.mode)||(st=!0))}function d(e,t){if(st=!1,ct=!1,!t&&";"!==V.last_text)for(;V.mode===ut.Statement&&!V.if_block&&!V.do_block;)O();1===G.length&&o()||(e||!o())&&(V.multiline_frame=!0,G.push(r()))}function f(){if(o()){var e=G[G.length-1];if(Kt.keep_array_indentation&&A(V.mode)&&ot){e.text.push("");for(var t=0;t<Tt.length;t+=1)e.text.push(Tt[t])}else pt&&e.text.push(pt),T(V.indentation_level+(V.var_line&&V.var_line_reindented?1:0)+(st?1:0))}}function T(e){if(G.length>1){var t=G[G.length-1];V.line_indent_level=e;for(var n=0;e>n;n+=1)t.text.push(J)}}function h(){var e=G[G.length-1];if(ct&&e.text.length){var t=e.text[e.text.length-1];" "!==t&&t!==J&&e.text.push(" ")}}function u(e){e=e||$,f(),st=!1,h(),ct=!1,G[G.length-1].text.push(e)}function K(){V.indentation_level+=1}function p(){V.indentation_level>0&&(!V.parent||V.indentation_level>V.parent.indentation_level)&&(V.indentation_level-=1)}function x(e){if(!e.multiline_frame)for(var t,n=e.start_line_index,r=0;n<G.length;)t=G[n],n++,0!==t.text.length&&(r=pt&&t.text[0]===pt?1:0,t.text[r]===J&&t.text.splice(r,1))}function v(e){V?(et.push(V),Y=V):Y=n(null,e),V=n(Y,e)}function A(e){return e===ut.ArrayLiteral}function E(e){return g(e,[ut.Expression,ut.ForInitializer,ut.Conditional])}function O(){et.length>0&&(Y=V,V=et.pop())}function m(){return"do"===V.last_text||"else"===V.last_text&&"if"!==$||"TK_END_EXPR"===q&&(Y.mode===ut.ForInitializer||Y.mode===ut.Conditional)?(c(g($,["do","for","if","while"])),v(ut.Statement),o()&&(K(),st=!1),!0):!1}function R(e,t){for(var n=0;n<e.length;n++){var r=a(e[n]);if(r.charAt(0)!==t)return!1}return!0}function N(e){return g(e,["case","return","do","if","throw","else"])}function g(e,t){for(var n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1}function b(e){for(var t,n=!1,r="",i=0,_="",a=0;n||i<e.length;)if(t=e.charAt(i),i++,n){if(n=!1,"x"===t)_=e.substr(i,2),i+=2;else{if("u"!==t){r+="\\"+t;continue}_=e.substr(i,4),i+=4}if(!_.match(/^[0123456789abcdefABCDEF]+$/))return e;if(a=parseInt(_,16),a>=0&&32>a){r+="x"===t?"\\x"+_:"\\u"+_;continue}if(34===a||39===a||92===a)r+="\\"+String.fromCharCode(a);else{if("x"===t&&a>126&&255>=a)return e;r+=String.fromCharCode(a)}}else"\\"===t?n=!0:r+=t;return r}function S(e){for(var t=it,n=Q.charAt(t);g(n,tt)&&n!==e;){if(t++,t>=dt)return!1;n=Q.charAt(t)}return n===e}function C(){var e;if(ft=0,it>=dt)return["","TK_EOF"];ot=!1,Tt=[];var t=Q.charAt(it);for(it+=1;g(t,tt);){if("\n"===t?(ft+=1,Tt=[]):ft&&(t===J?Tt.push(J):"\r"!==t&&Tt.push(" ")),it>=dt)return["","TK_EOF"];t=Q.charAt(it),it+=1}if(g(t,nt)){if(dt>it)for(;g(Q.charAt(it),nt)&&(t+=Q.charAt(it),it+=1,it!==dt););if(it!==dt&&t.match(/^[0-9]+[Ee]$/)&&("-"===Q.charAt(it)||"+"===Q.charAt(it))){var n=Q.charAt(it);it+=1;var r=C();return t+=n+r[0],[t,"TK_WORD"]}return"in"===t?[t,"TK_OPERATOR"]:[t,"TK_WORD"]}if("("===t||"["===t)return[t,"TK_START_EXPR"];if(")"===t||"]"===t)return[t,"TK_END_EXPR"];if("{"===t)return[t,"TK_START_BLOCK"];if("}"===t)return[t,"TK_END_BLOCK"];if(";"===t)return[t,"TK_SEMICOLON"];if("/"===t){var i="",_=!0;if("*"===Q.charAt(it)){if(it+=1,dt>it)for(;dt>it&&("*"!==Q.charAt(it)||!Q.charAt(it+1)||"/"!==Q.charAt(it+1))&&(t=Q.charAt(it),i+=t,("\n"===t||"\r"===t)&&(_=!1),it+=1,!(it>=dt)););return it+=2,_&&0===ft?["/*"+i+"*/","TK_INLINE_COMMENT"]:["/*"+i+"*/","TK_BLOCK_COMMENT"]}if("/"===Q.charAt(it)){for(i=t;"\r"!==Q.charAt(it)&&"\n"!==Q.charAt(it)&&(i+=Q.charAt(it),it+=1,!(it>=dt)););return[i,"TK_COMMENT"]}}if("'"===t||'"'===t||("/"===t||Kt.e4x&&"<"===t&&Q.slice(it-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*\/?\s*>/))&&("TK_WORD"===q&&N(V.last_text)||"TK_END_EXPR"===q&&g(Y.mode,[ut.Conditional,ut.ForInitializer])||g(q,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var l=t,o=!1,s=!1;if(e=t,dt>it)if("/"===l){for(var c=!1;o||c||Q.charAt(it)!==l;)if(e+=Q.charAt(it),o?o=!1:(o="\\"===Q.charAt(it),"["===Q.charAt(it)?c=!0:"]"===Q.charAt(it)&&(c=!1)),it+=1,it>=dt)return[e,"TK_STRING"]}else if(Kt.e4x&&"<"===l){var d=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*(\/?)\s*>/g,f=Q.slice(it-1),T=d.exec(f);if(T&&0===T.index){for(var h=T[2],u=0;T;){var K=!!T[1],p=T[2],x=!!T[T.length-1]||"![CDATA["===p.slice(0,8);if(p!==h||x||(K?--u:++u),0>=u)break;T=d.exec(f)}var v=T?T.index+T[0].length:f.length;return it+=v-1,[f.slice(0,v),"TK_STRING"]}}else for(;o||Q.charAt(it)!==l;)if(e+=Q.charAt(it),o?(("x"===Q.charAt(it)||"u"===Q.charAt(it))&&(s=!0),o=!1):o="\\"===Q.charAt(it),it+=1,it>=dt)return[e,"TK_STRING"];if(it+=1,e+=l,s&&Kt.unescape_strings&&(e=b(e)),"/"===l)for(;dt>it&&g(Q.charAt(it),nt);)e+=Q.charAt(it),it+=1;return[e,"TK_STRING"]}if("#"===t){if(1===G.length&&0===G[0].text.length&&"!"===Q.charAt(it)){for(e=t;dt>it&&"\n"!==t;)t=Q.charAt(it),e+=t,it+=1;return[a(e)+"\n","TK_UNKNOWN"]}var A="#";if(dt>it&&g(Q.charAt(it),at)){do t=Q.charAt(it),A+=t,it+=1;while(dt>it&&"#"!==t&&"="!==t);return"#"===t||("["===Q.charAt(it)&&"]"===Q.charAt(it+1)?(A+="[]",it+=2):"{"===Q.charAt(it)&&"}"===Q.charAt(it+1)&&(A+="{}",it+=2)),[A,"TK_WORD"]}}if("<"===t&&"<!--"===Q.substring(it-1,it+3)){for(it+=3,t="<!--";"\n"!==Q.charAt(it)&&dt>it;)t+=Q.charAt(it),it++;return V.in_html_comment=!0,[t,"TK_COMMENT"]}if("-"===t&&V.in_html_comment&&"-->"===Q.substring(it-1,it+2))return V.in_html_comment=!1,it+=2,["-->","TK_COMMENT"];if("."===t)return[t,"TK_DOT"];if(g(t,rt)){for(;dt>it&&g(t+Q.charAt(it),rt)&&(t+=Q.charAt(it),it+=1,!(it>=dt)););return","===t?[t,"TK_COMMA"]:"="===t?[t,"TK_EQUALS"]:[t,"TK_OPERATOR"]}return[t,"TK_UNKNOWN"]}function y(){m();var e=ut.Expression;if("["===$){if("TK_WORD"===q||")"===V.last_text)return g(V.last_text,_t)&&(ct=!0),v(e),u(),K(),Kt.space_in_paren&&(ct=!0),void 0;e=ut.ArrayLiteral,A(V.mode)&&("["===V.last_text||","===V.last_text&&("]"===H||"}"===H))&&(Kt.keep_array_indentation||d())}else"for"===V.last_text?e=ut.ForInitializer:g(V.last_text,["if","while"])&&(e=ut.Conditional);";"===V.last_text||"TK_START_BLOCK"===q?d():"TK_END_EXPR"===q||"TK_START_EXPR"===q||"TK_END_BLOCK"===q||"."===V.last_text?(c(ot),st=!1):"TK_WORD"!==q&&"TK_OPERATOR"!==q?ct=!0:"function"===V.last_word||"typeof"===V.last_word?Kt.jslint_happy&&(ct=!0):(g(V.last_text,_t)||"catch"===V.last_text)&&Kt.space_before_conditional&&(ct=!0),"("===$&&("TK_EQUALS"===q||"TK_OPERATOR"===q)&&V.mode!==ut.ObjectLiteral&&c(),v(e),u(),Kt.space_in_paren&&(ct=!0),K()}function L(){for(;V.mode===ut.Statement;)O();"]"===$&&A(V.mode)&&V.multiline_frame&&!Kt.keep_array_indentation&&d(),V.multiline_frame&&c(),Kt.space_in_paren&&("TK_START_EXPR"===q?(i(),ct=!1):ct=!0),"]"===$&&Kt.keep_array_indentation?(u(),O()):(O(),u()),x(Y),V.do_while&&Y.mode===ut.Conditional&&(Y.mode=ut.Expression,V.do_block=!1,V.do_while=!1)}function w(){v(ut.BlockStatement);var e=S("}"),t=e&&"function"===V.last_word&&"TK_END_EXPR"===q;"expand"===Kt.brace_style?"TK_OPERATOR"!==q&&(t||"TK_EQUALS"===q||N(V.last_text)&&"else"!==V.last_text)?ct=!0:d():"TK_OPERATOR"!==q&&"TK_START_EXPR"!==q?"TK_START_BLOCK"===q?d():ct=!0:A(Y.mode)&&","===V.last_text&&("}"===H?ct=!0:d()),u(),K()}function k(){for(;V.mode===ut.Statement;)O();var e="TK_START_BLOCK"===q;"expand"===Kt.brace_style?e||d():e||(A(V.mode)&&Kt.keep_array_indentation?(Kt.keep_array_indentation=!1,d(),Kt.keep_array_indentation=!0):d()),O(),u()}function M(){if(m()||!ot||E(V.mode)||"TK_OPERATOR"===q&&"--"!==V.last_text&&"++"!==V.last_text||"TK_EQUALS"===q||!Kt.preserve_newlines&&"var"===V.last_text||d(),V.do_block&&!V.do_while){if("while"===$)return ct=!0,u(),ct=!0,V.do_while=!0,void 0;d(),V.do_block=!1}if(V.if_block&&"else"!==$){for(;V.mode===ut.Statement;)O();V.if_block=!1}if("case"===$||"default"===$&&V.in_case_statement)return d(),(V.case_body||Kt.jslint_happy)&&(p(),V.case_body=!1),u(),V.in_case=!0,V.in_case_statement=!0,void 0;if("function"===$&&(V.var_line&&"TK_EQUALS"!==q&&(V.var_line_reindented=!0),!o()&&";"!==V.last_text&&"}"!==V.last_text||"{"===V.last_text||A(V.mode)||s()||(d(),d(!0)),"TK_WORD"===q?"get"===V.last_text||"set"===V.last_text||"new"===V.last_text||"return"===V.last_text?ct=!0:d():"TK_OPERATOR"===q||"="===V.last_text?ct=!0:E(V.mode)||d()),("TK_COMMA"===q||"TK_START_EXPR"===q||"TK_EQUALS"===q||"TK_OPERATOR"===q)&&V.mode!==ut.ObjectLiteral&&c(),"function"===$)return u(),V.last_word=$,void 0;if(lt="NONE","TK_END_BLOCK"===q?g($,["else","catch","finally"])?"expand"===Kt.brace_style||"end-expand"===Kt.brace_style?lt="NEWLINE":(lt="SPACE",ct=!0):lt="NEWLINE":"TK_SEMICOLON"===q&&V.mode===ut.BlockStatement?lt="NEWLINE":"TK_SEMICOLON"===q&&E(V.mode)?lt="SPACE":"TK_STRING"===q?lt="NEWLINE":"TK_WORD"===q?lt="SPACE":"TK_START_BLOCK"===q?lt="NEWLINE":"TK_END_EXPR"===q&&(ct=!0,lt="NEWLINE"),g($,_t)&&")"!==V.last_text&&(lt="else"===V.last_text?"SPACE":"NEWLINE"),g($,["else","catch","finally"]))if("TK_END_BLOCK"!==q||"expand"===Kt.brace_style||"end-expand"===Kt.brace_style)d();else{i(!0);var e=G[G.length-1];"}"!==e.text[e.text.length-1]&&d(),ct=!0}else"NEWLINE"===lt?N(V.last_text)?ct=!0:"TK_END_EXPR"!==q?"TK_START_EXPR"===q&&"var"===$||":"===V.last_text||("if"===$&&"else"===V.last_word&&"{"!==V.last_text?ct=!0:(V.var_line=!1,V.var_line_reindented=!1,d())):g($,_t)&&")"!==V.last_text&&(V.var_line=!1,V.var_line_reindented=!1,d()):A(V.mode)&&","===V.last_text&&"}"===H?d():"SPACE"===lt&&(ct=!0);u(),V.last_word=$,"var"===$&&(V.var_line=!0,V.var_line_reindented=!1,V.var_line_tainted=!1),"do"===$&&(V.do_block=!0),"if"===$&&(V.if_block=!0)}function P(){for(m()&&(ct=!1);V.mode===ut.Statement&&!V.if_block&&!V.do_block;)O();u(),V.var_line=!1,V.var_line_reindented=!1,V.mode===ut.ObjectLiteral&&(V.mode=ut.BlockStatement)}function I(){m()?ct=!0:"TK_WORD"===q?ct=!0:"TK_COMMA"===q||"TK_START_EXPR"===q||"TK_EQUALS"===q||"TK_OPERATOR"===q?V.mode!==ut.ObjectLiteral&&c():d(),u()}function D(){V.var_line&&(V.var_line_tainted=!0),ct=!0,u(),ct=!0}function B(){return V.var_line?((E(V.mode)||"TK_END_BLOCK"===q)&&(V.var_line_tainted=!1),V.var_line&&(V.var_line_reindented=!0),u(),V.var_line_tainted?(V.var_line_tainted=!1,d()):ct=!0,void 0):("TK_END_BLOCK"===q&&V.mode!==ut.Expression?(u(),V.mode===ut.ObjectLiteral&&"}"===V.last_text?d():ct=!0):V.mode===ut.ObjectLiteral?(u(),d()):(u(),ct=!0),void 0)}function j(){var e=!0,t=!0;return N(V.last_text)?(ct=!0,u(),void 0):"*"!==$||"TK_DOT"!==q||H.match(/^\d+$/)?":"===$&&V.in_case?(V.case_body=!0,K(),u(),d(),V.in_case=!1,void 0):"::"===$?(u(),void 0):(!ot||"--"!==$&&"++"!==$||d(),g($,["--","++","!"])||g($,["-","+"])&&(g(q,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||g(V.last_text,_t)||","===V.last_text)?(e=!1,t=!1,";"===V.last_text&&E(V.mode)&&(e=!0),"TK_WORD"===q&&g(V.last_text,_t)&&(e=!0),V.mode!==ut.BlockStatement&&V.mode!==ut.Statement||"{"!==V.last_text&&";"!==V.last_text||d()):":"===$?0===V.ternary_depth?(V.mode===ut.BlockStatement&&(V.mode=ut.ObjectLiteral),e=!1):V.ternary_depth-=1:"?"===$&&(V.ternary_depth+=1),ct=ct||e,u(),ct=t,void 0):(u(),void 0)}function W(){var e,t=l($),n=!1;for(d(!1,!0),t.length>1&&R(t.slice(1),"*")&&(n=!0),u(t[0]),e=1;e<t.length;e++)d(!1,!0),n?u(" "+a(t[e])):G[G.length-1].text.push(t[e]);d(!1,!0)}function X(){ct=!0,u(),ct=!0}function z(){ot?d(!1,!0):i(!0),ct=!0,u(),d(!1,!0)}function U(){N(V.last_text)?ct=!0:c(")"===V.last_text&&Kt.break_chained_methods),u()}function F(){u(),"\n"===$[$.length-1]&&d()}var Q,G,$,Z,q,H,J,V,Y,et,tt,nt,rt,it,_t,at,lt,ot,st,ct,dt,ft,Tt,ht,ut,Kt,pt="";for(tt="\n\r	 ".split(""),nt="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(""),at="0123456789".split(""),rt="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::",rt+=" <%= <% %> <?= <? ?>",rt=rt.split(" "),_t="continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(","),ut={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},ht={TK_START_EXPR:y,TK_END_EXPR:L,TK_START_BLOCK:w,TK_END_BLOCK:k,TK_WORD:M,TK_SEMICOLON:P,TK_STRING:I,TK_EQUALS:D,TK_OPERATOR:j,TK_COMMA:B,TK_BLOCK_COMMENT:W,TK_INLINE_COMMENT:X,TK_COMMENT:z,TK_DOT:U,TK_UNKNOWN:F},t=t?t:{},Kt={},void 0!==t.space_after_anon_function&&void 0===t.jslint_happy&&(t.jslint_happy=t.space_after_anon_function),void 0!==t.braces_on_own_line&&(Kt.brace_style=t.braces_on_own_line?"expand":"collapse"),Kt.brace_style=t.brace_style?t.brace_style:Kt.brace_style?Kt.brace_style:"collapse","expand-strict"===Kt.brace_style&&(Kt.brace_style="expand"),Kt.indent_size=t.indent_size?parseInt(t.indent_size,10):4,Kt.indent_char=t.indent_char?t.indent_char:" ",Kt.preserve_newlines=void 0===t.preserve_newlines?!0:t.preserve_newlines,Kt.break_chained_methods=void 0===t.break_chained_methods?!1:t.break_chained_methods,Kt.max_preserve_newlines=void 0===t.max_preserve_newlines?0:parseInt(t.max_preserve_newlines,10),Kt.space_in_paren=void 0===t.space_in_paren?!1:t.space_in_paren,Kt.jslint_happy=void 0===t.jslint_happy?!1:t.jslint_happy,Kt.keep_array_indentation=void 0===t.keep_array_indentation?!1:t.keep_array_indentation,Kt.space_before_conditional=void 0===t.space_before_conditional?!0:t.space_before_conditional,Kt.unescape_strings=void 0===t.unescape_strings?!1:t.unescape_strings,Kt.wrap_line_length=void 0===t.wrap_line_length?0:parseInt(t.wrap_line_length,10),Kt.e4x=void 0===t.e4x?!1:t.e4x,t.indent_with_tabs&&(Kt.indent_char="	",Kt.indent_size=1),J="";Kt.indent_size>0;)J+=Kt.indent_char,Kt.indent_size-=1;for(;e&&(" "===e.charAt(0)||"	"===e.charAt(0));)pt+=e.charAt(0),e=e.substring(1);Q=e,dt=e.length,q="TK_START_BLOCK",H="",G=[r()],st=!1,ct=!1,Tt=[],et=[],v(ut.BlockStatement),it=0,this.beautify=function(){for(var e,t,n,r;;){if(e=C(),$=e[0],Z=e[1],"TK_EOF"===Z)break;if(n=Kt.keep_array_indentation&&A(V.mode),ot=ft>0,n)for(t=0;ft>t;t+=1)d(t>0);else if(Kt.max_preserve_newlines&&ft>Kt.max_preserve_newlines&&(ft=Kt.max_preserve_newlines),Kt.preserve_newlines&&ft>1)for(d(),t=1;ft>t;t+=1)d(!0);ht[Z](),"TK_INLINE_COMMENT"!==Z&&"TK_COMMENT"!==Z&&"TK_UNKNOWN"!==Z&&(H=V.last_text,q=Z,V.last_text=$)}r=G[0].text.join("");for(var i=1;i<G.length;i++)r+="\n"+G[i].text.join("");return r=r.replace(/[\r\n ]+$/,"")}}"function"==typeof define?"undefined"==typeof define.amd?define(function(t,n){n.js_beautify=e}):define([],function(){return e}):"undefined"!=typeof exports?exports.js_beautify=e:"undefined"!=typeof window?window.js_beautify=e:"undefined"!=typeof global&&(global.js_beautify=e)}();
